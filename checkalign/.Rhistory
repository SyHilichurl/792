nrow <- RandC[1]
ncol <- RandC[2]
vps <- viewport(layout = grid.layout(nrow, ncol))
j = 1
matches <- logical(length(item))
if (align==0.5 | align==0) {
for (index in seq_along(matchInfo$x)) {
flag = FALSE
cnt = 1
for (i in matchInfo$xAlignment[[index]])
if (attr(grobInfo[[i]], "name") %in% item) {
flag = TRUE
break
}
if (flag) {
crow <- ceiling(j / ncol)
ccol <- j %% ncol
ccol[ccol == 0] <- ncol
cvp = viewport(layout.pos.row = crow, layout.pos.col = ccol)
j = j + 1
for (i in matchInfo$xAlignment[[index]]) {
lty = 3
tmp <- attr(grobInfo[[i]], "name")
if (tmp %in% item) {
lty = 1
matches[which(item==tmp)] <- TRUE
}
x = grobInfo[[i]][1]
width = grobInfo[[i]][2] - grobInfo[[i]][1]
y = grobInfo[[i]][3]
height = grobInfo[[i]][4] - grobInfo[[i]][3]
name = paste0("x.", nameFour(x,r), ".", cnt, ".",
attr(grobInfo[[i]],"name"),".alignment")
grid.rect(x = x, y = y, width = width, height = height,
default.units = "in", just = c(0, 0),
gp = gpar(col = "blue", fill = rgb(0,0,1,0.1), lty=lty),
name = name, vp=cvp)
cnt = cnt + 1
}
grid.lines(x = matchInfo$x[index], default.units = "in",
gp = gpar(col = "blue"), vp=cvp,
name = paste0("x.", nameFour(matchInfo$x[index],r), ".alignment"))
}
}
}
devtools::load_all(".")
devtools::load_all(".")
checkalign2 <- function() {
if (require(ggplot2)) {
g <- ggplot(mtcars) + geom_point(aes(disp, mpg, color=factor(vs))) +
labs(title = "test") + facet_wrap(~gear)
} else {
cat("The example requires 'ggplot2' which is not installed.")
}
res <- checkAlignment(g, include="text", exclude=c("tag", "points"), rounding=4)
cat(res)
}
checkalign2()
devtools::load_all(".")
checkalign2 <- function() {
if (require(ggplot2)) {
g <- ggplot(mtcars) + geom_point(aes(disp, mpg, color=factor(vs))) +
labs(title = "test") + facet_wrap(~gear)
} else {
cat("The example requires 'ggplot2' which is not installed.")
}
res <- checkAlignment(g, include="text", exclude=c("tag", "points"), rounding=4)
cat(res)
}
checkalign2()
grid.ls()
?devAskNewPage()
?dev.interactive()
?devAskNewPage()
library(grid)
# 设定总的行和列数
total_rows <- 2
total_cols <- 2
# 创建一个新的viewport
vp <- viewport(layout = grid.layout(total_rows, total_cols))
# 将viewport推入当前的视口堆栈
pushViewport(vp)
# 在一个for循环中生成facet
for (i in 1:(total_rows * total_cols)) {
# 计算当前facet的行和列位置
current_row <- ceiling(i / total_cols)
current_col <- i %% total_cols
current_col[current_col == 0] <- total_cols  # 处理整除的情况
# 创建facet的内容，这里用一个简单的矩形和文本表示
grid.rect(gp = gpar(col = rainbow(4)[i]), vp = viewport(layout.pos.row = current_row, layout.pos.col = current_col))
grid.text(paste("Facet", i), x = 0.5, y = 0.5, vp = viewport(layout.pos.row = current_row, layout.pos.col = current_col))
}
# 回到原始viewport
upViewport()
devtools::load_all(".")
checkalign2 <- function() {
if (require(ggplot2)) {
g <- ggplot(mtcars) + geom_point(aes(disp, mpg, color=factor(vs))) +
labs(title = "test") + facet_wrap(~gear)
} else {
cat("The example requires 'ggplot2' which is not installed.")
}
res <- checkAlignment(g, include="text", exclude=c("tag", "points"), rounding=4)
cat(res)
}
checkalign2()
devtools::load_all(".")
checkalign2 <- function() {
if (require(ggplot2)) {
g <- ggplot(mtcars) + geom_point(aes(disp, mpg, color=factor(vs))) +
labs(title = "test") + facet_wrap(~gear)
} else {
cat("The example requires 'ggplot2' which is not installed.")
}
res <- checkAlignment(g, include="text", exclude=c("tag", "points"), rounding=4)
cat(res)
}
checkalign2()
g
grobCoords(g)
grid.force()
g
?grobCoords
grobCoords(g)
grobCoords(g, closed=TRUE)
grid.ls()
g
grid.force()
grid.ls()
g
grid.ls()
grobCords("layout")
grobCoords("layout")
grobCoords("layout",closed = TRUE)
grobCoords(grid.get("layout"), closed = TRUE)
grobInfo
debug(drawMatch)
checkalign2()
grobInfo
grobInfo[[1]]
devtools::load_all(".")
checkalign2 <- function() {
if (require(ggplot2)) {
g <- ggplot(mtcars) + geom_point(aes(disp, mpg, color=factor(vs))) +
labs(title = "test") + facet_wrap(~gear)
} else {
cat("The example requires 'ggplot2' which is not installed.")
}
res <- checkAlignment(g, include="text", exclude=c("tag", "points"), rounding=4)
cat(res)
}
checkalign2()
devtools::load_all(".")
checkalign2 <- function() {
if (require(ggplot2)) {
g <- ggplot(mtcars) + geom_point(aes(disp, mpg, color=factor(vs))) +
labs(title = "test") + facet_wrap(~gear)
} else {
cat("The example requires 'ggplot2' which is not installed.")
}
res <- checkAlignment(g, include="text", exclude=c("tag", "points"), rounding=4)
cat(res)
}
checkalign2()
devtools::load_all(".")
checkalign2 <- function() {
if (require(ggplot2)) {
g <- ggplot(mtcars) + geom_point(aes(disp, mpg, color=factor(vs))) +
labs(title = "test") + facet_wrap(~gear)
} else {
cat("The example requires 'ggplot2' which is not installed.")
}
res <- checkAlignment(g, include="text", exclude=c("tag", "points"), rounding=4)
cat(res)
}
checkalign2()
devtools::load_all(".")
checkalign2 <- function() {
if (require(ggplot2)) {
g <- ggplot(mtcars) + geom_point(aes(disp, mpg, color=factor(vs))) +
labs(title = "test") + facet_wrap(~gear)
} else {
cat("The example requires 'ggplot2' which is not installed.")
}
res <- checkAlignment(g, include="text", exclude=c("tag", "points"), rounding=4)
cat(res)
}
checkalign2()
devtools::load_all(".")
checkalign2()
checkalign2 <- function() {
if (require(ggplot2)) {
g <- ggplot(mtcars) + geom_point(aes(disp, mpg, color=factor(vs))) +
labs(title = "test") + facet_wrap(~gear)
} else {
cat("The example requires 'ggplot2' which is not installed.")
}
res <- checkAlignment(g, include="text", exclude=c("tag", "points"), rounding=4)
cat(res)
}
checkalign2()
devtools::load_all(".")
checkalign2 <- function() {
if (require(ggplot2)) {
g <- ggplot(mtcars) + geom_point(aes(disp, mpg, color=factor(vs))) +
labs(title = "test") + facet_wrap(~gear)
} else {
cat("The example requires 'ggplot2' which is not installed.")
}
res <- checkAlignment(g, include="text", exclude=c("tag", "points"), rounding=4)
cat(res)
}
checkalign2()
devtools::load_all(".")
checkalign2 <- function() {
if (require(ggplot2)) {
g <- ggplot(mtcars) + geom_point(aes(disp, mpg, color=factor(vs))) +
labs(title = "test") + facet_wrap(~gear)
} else {
cat("The example requires 'ggplot2' which is not installed.")
}
res <- checkAlignment(g, include="text", exclude=c("tag", "points"), rounding=4)
cat(res)
}
checkalign2()
library(checkalign)
f <- function() plot(1, axes=FALSE)
png("plot1.png")
checkAlignment(f)
devtools::load_all(".")
checkalign2 <- function() {
if (require(ggplot2)) {
g <- ggplot(mtcars) + geom_point(aes(disp, mpg, color=factor(vs))) +
labs(title = "test") + facet_wrap(~gear)
} else {
cat("The example requires 'ggplot2' which is not installed.")
}
res <- checkAlignment(g, include="text", exclude=c("tag", "points"), rounding=4)
cat(res)
}
checkalign2()
devtools::load_all(".")
checkalign2 <- function() {
if (require(ggplot2)) {
g <- ggplot(mtcars) + geom_point(aes(disp, mpg, color=factor(vs))) +
labs(title = "test") + facet_wrap(~gear)
} else {
cat("The example requires 'ggplot2' which is not installed.")
}
res <- checkAlignment(g, include="text", exclude=c("tag", "points"), rounding=4)
cat(res)
}
checkalign2()
devtools::load_all(".")
checkalign2 <- function() {
if (require(ggplot2)) {
g <- ggplot(mtcars) + geom_point(aes(disp, mpg, color=factor(vs))) +
labs(title = "test") + facet_wrap(~gear)
} else {
cat("The example requires 'ggplot2' which is not installed.")
}
res <- checkAlignment(g, include="text", exclude=c("tag", "points"), rounding=4)
cat(res)
}
checkalign2()
?grid.raster
devtools::load_all(".")
checkalign2 <- function() {
if (require(ggplot2)) {
g <- ggplot(mtcars) + geom_point(aes(disp, mpg, color=factor(vs))) +
labs(title = "test") + facet_wrap(~gear)
} else {
cat("The example requires 'ggplot2' which is not installed.")
}
res <- checkAlignment(g, include="text", exclude=c("tag", "points"), rounding=4)
cat(res)
}
checkalign2()
devtools::load_all(".")
checkalign2 <- function() {
if (require(ggplot2)) {
g <- ggplot(mtcars) + geom_point(aes(disp, mpg, color=factor(vs))) +
labs(title = "test") + facet_wrap(~gear)
} else {
cat("The example requires 'ggplot2' which is not installed.")
}
res <- checkAlignment(g, include="text", exclude=c("tag", "points"), rounding=4)
cat(res)
}
checkalign2()
devtools::load_all(".")
checkalign2 <- function() {
if (require(ggplot2)) {
g <- ggplot(mtcars) + geom_point(aes(disp, mpg, color=factor(vs))) +
labs(title = "test") + facet_wrap(~gear)
} else {
cat("The example requires 'ggplot2' which is not installed.")
}
res <- checkAlignment(g, include="text", exclude=c("tag", "points"), rounding=4)
cat(res)
}
checkalign2()
devtools::load_all(".")
devtools::load_all(".")
checkalign2 <- function() {
if (require(ggplot2)) {
g <- ggplot(mtcars) + geom_point(aes(disp, mpg, color=factor(vs))) +
labs(title = "test") + facet_wrap(~gear)
} else {
cat("The example requires 'ggplot2' which is not installed.")
}
res <- checkAlignment(g, include="text", exclude=c("tag", "points"), rounding=4)
cat(res)
}
checkalign2()
devtools::load_all(".")
checkalign2 <- function() {
if (require(ggplot2)) {
g <- ggplot(mtcars) + geom_point(aes(disp, mpg, color=factor(vs))) +
labs(title = "test") + facet_wrap(~gear)
} else {
cat("The example requires 'ggplot2' which is not installed.")
}
res <- checkAlignment(g, include="text", exclude=c("tag", "points"), rounding=4)
cat(res)
}
checkalign2()
?coord_fixed
devtools::load_all(".")
checkalign2 <- function() {
if (require(ggplot2)) {
g <- ggplot(mtcars) + geom_point(aes(disp, mpg, color=factor(vs))) +
labs(title = "test") + facet_wrap(~gear)
} else {
cat("The example requires 'ggplot2' which is not installed.")
}
res <- checkAlignment(g, include="text", exclude=c("tag", "points"), rounding=4)
cat(res)
}
checkalign2()
devtools::load_all(".")
checkalign2 <- function() {
if (require(ggplot2)) {
g <- ggplot(mtcars) + geom_point(aes(disp, mpg, color=factor(vs))) +
labs(title = "test") + facet_wrap(~gear)
} else {
cat("The example requires 'ggplot2' which is not installed.")
}
res <- checkAlignment(g, include="text", exclude=c("tag", "points"), rounding=4)
cat(res)
}
checkalign2()
devtools::load_all(".")
checkalign2 <- function() {
if (require(ggplot2)) {
g <- ggplot(mtcars) + geom_point(aes(disp, mpg, color=factor(vs))) +
labs(title = "test") + facet_wrap(~gear)
} else {
cat("The example requires 'ggplot2' which is not installed.")
}
res <- checkAlignment(g, include="text", exclude=c("tag", "points"), rounding=4)
cat(res)
}
checkalign2()
devtools::load_all(".")
checkalign2 <- function() {
if (require(ggplot2)) {
g <- ggplot(mtcars) + geom_point(aes(disp, mpg, color=factor(vs))) +
labs(title = "test") + facet_wrap(~gear)
} else {
cat("The example requires 'ggplot2' which is not installed.")
}
res <- checkAlignment(g, include="text", exclude=c("tag", "points"), rounding=4)
cat(res)
}
checkalign2()
devtools::load_all(".")
checkalign2 <- function() {
if (require(ggplot2)) {
g <- ggplot(mtcars) + geom_point(aes(disp, mpg, color=factor(vs))) +
labs(title = "test") + facet_wrap(~gear)
} else {
cat("The example requires 'ggplot2' which is not installed.")
}
res <- checkAlignment(g, include="text", exclude=c("tag", "points"), rounding=4)
cat(res)
}
checkalign2()
devtools::load_all(".")
checkalign2 <- function() {
if (require(ggplot2)) {
g <- ggplot(mtcars) + geom_point(aes(disp, mpg, color=factor(vs))) +
labs(title = "test") + facet_wrap(~gear)
} else {
cat("The example requires 'ggplot2' which is not installed.")
}
res <- checkAlignment(g, include="text", exclude=c("tag", "points"), rounding=4)
cat(res)
}
checkalign2()
devtools::load_all(".")
checkalign2 <- function() {
if (require(ggplot2)) {
g <- ggplot(mtcars) + geom_point(aes(disp, mpg, color=factor(vs))) +
labs(title = "test") + facet_wrap(~gear)
} else {
cat("The example requires 'ggplot2' which is not installed.")
}
res <- checkAlignment(g, include="text", exclude=c("tag", "points"), rounding=4)
cat(res)
}
checkalign2()
devtools::load_all(".")
checkalign2 <- function() {
if (require(ggplot2)) {
g <- ggplot(mtcars) + geom_point(aes(disp, mpg, color=factor(vs))) +
labs(title = "test") + facet_wrap(~gear)
} else {
cat("The example requires 'ggplot2' which is not installed.")
}
res <- checkAlignment(g, include="text", exclude=c("tag", "points"), rounding=4)
cat(res)
}
checkalign2()
devtools::load_all(".")
checkalign2 <- function() {
if (require(ggplot2)) {
g <- ggplot(mtcars) + geom_point(aes(disp, mpg, color=factor(vs))) +
labs(title = "test") + facet_wrap(~gear)
} else {
cat("The example requires 'ggplot2' which is not installed.")
}
res <- checkAlignment(g, include="text", exclude=c("tag", "points"), rounding=4)
cat(res)
}
checkalign2()
devtools::load_all(".")
checkalign2 <- function() {
if (require(ggplot2)) {
g <- ggplot(mtcars) + geom_point(aes(disp, mpg, color=factor(vs))) +
labs(title = "test") + facet_wrap(~gear)
} else {
cat("The example requires 'ggplot2' which is not installed.")
}
res <- checkAlignment(g, include="text", exclude=c("tag", "points"), rounding=4)
cat(res)
}
checkalign2()
devtools::load_all(".")
checkalign2()
?grid.raster
?readPNG
devtools::load_all(".")
checkalign2 <- function() {
if (require(ggplot2)) {
g <- ggplot(mtcars) + geom_point(aes(disp, mpg, color=factor(vs))) +
labs(title = "test") + facet_wrap(~gear)
} else {
cat("The example requires 'ggplot2' which is not installed.")
}
res <- checkAlignment(g, include="text", exclude=c("tag", "points"), rounding=4)
cat(res)
}
checkalign2()
devtools::load_all(".")
checkalign2 <- function() {
if (require(ggplot2)) {
g <- ggplot(mtcars) + geom_point(aes(disp, mpg, color=factor(vs))) +
labs(title = "test") + facet_wrap(~gear)
} else {
cat("The example requires 'ggplot2' which is not installed.")
}
res <- checkAlignment(g, include="text", exclude=c("tag", "points"), rounding=4)
cat(res)
}
checkalign2()
devtools::load_all(".")
checkalign2 <- function() {
if (require(ggplot2)) {
g <- ggplot(mtcars) + geom_point(aes(disp, mpg, color=factor(vs))) +
labs(title = "test") + facet_wrap(~gear)
} else {
cat("The example requires 'ggplot2' which is not installed.")
}
res <- checkAlignment(g, include="text", exclude=c("tag", "points"), rounding=4)
cat(res)
}
checkalign2()
devtools::load_all(".")
checkalign2 <- function() {
if (require(ggplot2)) {
g <- ggplot(mtcars) + geom_point(aes(disp, mpg, color=factor(vs))) +
labs(title = "test") + facet_wrap(~gear)
} else {
cat("The example requires 'ggplot2' which is not installed.")
}
res <- checkAlignment(g, include="text", exclude=c("tag", "points"), rounding=4)
cat(res)
}
checkalign2()
devtools::load_all(".")
checkalign2 <- function() {
if (require(ggplot2)) {
g <- ggplot(mtcars) + geom_point(aes(disp, mpg, color=factor(vs))) +
labs(title = "test") + facet_wrap(~gear)
} else {
cat("The example requires 'ggplot2' which is not installed.")
}
res <- checkAlignment(g, include="text", exclude=c("tag", "points"), rounding=4)
cat(res)
}
checkalign2()
